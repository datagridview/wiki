<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Vim - 何先生的wiki</title>
    <meta name="keywords" content="wiki,simiki"/>
    <meta name="description" content="newpage of github"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Writing Mode">Writing Mode</a>&nbsp;&#187;&nbsp;Vim
    <span class="updated">Page Updated&nbsp;
      2017-08-02 11:00
      
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">Vim</div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">快捷键</a><ul>
<li><a href="#movement">Movement</a></li>
<li><a href="#search">Search</a></li>
<li><a href="#deletion">Deletion</a></li>
<li><a href="#yank-put">Yank &amp; Put</a></li>
<li><a href="#insert-mode">Insert Mode</a></li>
<li><a href="#visual-mode">Visual Mode</a></li>
<li><a href="#other">Other</a></li>
</ul>
</li>
<li><a href="#_2">技巧</a><ul>
<li><a href="#shell">shell多行注释</a></li>
<li><a href="#help">左右分割打开help文档</a></li>
<li><a href="#_3">逐个替换</a></li>
<li><a href="#searchreplace">关于 search/replace 中的换行符</a></li>
<li><a href="#_4">删除所有匹配的行</a></li>
<li><a href="#vim">vim调试插件</a></li>
<li><a href="#_5">忽略大小写搜索</a></li>
</ul>
</li>
<li><a href="#_6">参考</a></li>
</ul>
</div>
<p>配置见<a href="https://github.com/tankywoo/dotfiles">dotfiles</a></p>
<h2 id="_1">快捷键</h2>
<h3 id="movement">Movement</h3>
<ul>
<li><code>h</code>  - Move <em>left</em></li>
<li><code>j</code>  - Move <em>down</em></li>
<li><code>k</code>  - Move <em>up</em></li>
<li><code>l</code>  - Move <em>right</em></li>
<li><code>0</code>  - Move to <em>beginging</em> of line, 也可以使用 <code>Home</code>.</li>
<li><code>^</code>  - 在有tab或space的代码行里, <code>0</code>是移到最行首, 而<code>^</code>是移到代码行首</li>
<li><code>$</code>  - Move to <em>end</em> of line</li>
<li><code>gg</code> - Move to <em>first</em> line of file</li>
<li><code>G</code>  - Move to <em>last</em> line of file</li>
<li><code>ngg</code>- 移动到指定的第n行, 也可以用<code>nG</code></li>
<li><code>w</code>  - Move <em>forward</em> to next word</li>
<li><code>b</code>  - Move <em>backward</em> to next word</li>
<li><code>%</code>  - 在匹配的括号、块的首尾移动</li>
<li><code>C-o</code>- 返回到上次移动前的位置, 也可以用两个单引号<code>'</code></li>
<li><code>C-i</code>- 前进到后一次移动的位置</li>
<li><code>f</code>  - 后接字符，移动到当前行的下一个指定字符，然后按<code>;</code>继续搜索下一个</li>
<li><code>F</code>  - 同上，移动到上一个</li>
<li><code>|</code>  - 竖线，前接数字，移动到当前行的指定列，如<code>30|</code>，移动到当前行的第30列</li>
</ul>
<h3 id="search">Search</h3>
<ul>
<li><code>*</code>     - Search <em>forward</em> for word under cursor</li>
<li><code>#</code>     - Search <em>backward</em> for word under curor</li>
<li><code>/word</code> - Search <em>forward</em> for <em>word</em>. Support <em>RE</em></li>
<li><code>?word</code> - Search <em>backward</em> for <em>word</em>. Support <em>RE</em></li>
<li><code>n</code>     - Repeat the last <code>/</code> or <code>?</code> command  </li>
<li><code>N</code>     - Repeat the last <code>/</code> or <code>?</code> command in opposite direction</li>
</ul>
<p>在搜索后, 被搜索的单词都会高亮, 一般想取消那些高亮的单词, 可以再次搜索随便输入一些字母, 搜索不到自然就取消了. 另外也可以使用 <code>nohl</code> 取消这些被高亮的词.</p>
<h3 id="deletion">Deletion</h3>
<ul>
<li><code>x</code>  - Delete character <em>forward</em>(under cursor), and remain in normal mode</li>
<li><code>X</code>  - Delete character <em>backward</em>(before cursor), and remain in normal mode</li>
<li><code>r</code>  - Replace single character under cursor, and remain in normal mode</li>
<li><code>s</code>  - Delete single character under cursor, and <em>switch</em> to insert mode</li>
<li><code>shift+~</code> - 这个可以把光标下的单词转换为大写/小写, 并自动移到下一个字符</li>
<li><code>dw</code> - Delete a <em>word</em> forward</li>
<li><code>daw</code>- 上面的<code>dw</code>是删除一个单词的前向部分, 而这个是删除整个单词, 不论cursor是否在单词中间</li>
<li><code>db</code> - Delete a <em>word</em> backward</li>
<li><code>dd</code> - Delete <em>entire</em> current line</li>
<li><code>D</code>  - Delete until end of line</li>
</ul>
<h3 id="yank-put">Yank &amp; Put</h3>
<ul>
<li><code>y</code>   - Yank(copy)</li>
<li><code>yy</code>  - Yank current line</li>
<li><code>nyy</code> - Yank <code>n</code> lines form current line</li>
<li><code>p</code>   - Put(paste) yanked text <em>below</em> current line</li>
<li><code>P</code>   - Put(paste) yanked text <em>above</em> current line</li>
</ul>
<h3 id="insert-mode">Insert Mode</h3>
<ul>
<li><code>i</code> - Enter insert mode to the <em>left</em> of the cursor</li>
<li><code>a</code> - Enter insert mode to the <em>right</em> of the cursor</li>
<li><code>o</code> - Enter insert mode to the line <em>below</em> the current line</li>
<li><code>O</code> - Enter insert mode to the line <em>above</em> the current line</li>
</ul>
<h3 id="visual-mode">Visual Mode</h3>
<ul>
<li><code>v</code>   - Enter visual mode, highlight characters</li>
<li><code>V</code>   - Enter visual mode, highlight lines</li>
<li><code>C-v</code> - Enter visual mode, highlight block</li>
</ul>
<h3 id="other">Other</h3>
<ul>
<li><code>u</code>   - Undo</li>
<li><code>U</code>   - Undo all changes on current line</li>
<li><code>C-r</code> - Redo</li>
</ul>
<h2 id="_2">技巧</h2>
<h3 id="shell">shell多行注释</h3>
<p>命令行模式下，注释掉line1与line2之间的行</p>
<div class="hlcode"><pre><span class="n">line1</span><span class="p">,</span><span class="n">line2s</span><span class="o">/^/</span><span class="err">#</span><span class="o">/</span><span class="n">g</span>
</pre></div>


<h3 id="help">左右分割打开help文档</h3>
<p>默认是上下分割来打开文档，但是对于宽屏，左右分割反而更加方便</p>
<div class="hlcode"><pre><span class="o">:</span><span class="n">vert</span> <span class="n">help</span> <span class="n">xxx</span>
</pre></div>


<h3 id="_3">逐个替换</h3>
<p>全文直接替换:</p>
<div class="hlcode"><pre><span class="o">:%</span><span class="n">s</span><span class="o">/</span><span class="n">old_str</span><span class="o">/</span><span class="n">new_str</span><span class="o">/</span><span class="n">g</span>
</pre></div>


<p>加上参数c可以逐个替换，这样可以对每一个再确认:</p>
<div class="hlcode"><pre><span class="o">:%</span><span class="n">s</span><span class="o">/</span><span class="n">old_str</span><span class="o">/</span><span class="n">new_str</span><span class="o">/</span><span class="n">gc</span>
</pre></div>


<h3 id="searchreplace">关于 search/replace 中的换行符</h3>
<p>Search:</p>
<p><code>\n</code> is <code>newline</code>, <code>\r</code> is <code>CR</code>(carriage return = Ctrl-M = ^M)</p>
<p>Replace:</p>
<p><code>\r</code> is newline, <code>\n</code> is a null byte(0x00)</p>
<p>比如字符串 test1,test2,test3 把逗号换成换行：</p>
<div class="hlcode"><pre><span class="c">%s/,/\r/g</span>
</pre></div>


<h3 id="_4">删除所有匹配的行</h3>
<div class="hlcode"><pre><span class="cp"># 删除所有包含abcd的行</span>
<span class="o">:</span><span class="n">g</span><span class="o">/</span><span class="n">abcd</span><span class="o">/</span><span class="n">d</span>
</pre></div>


<p>参考: <a href="http://vim.wikia.com/wiki/Delete_all_lines_containing_a_pattern">Delete all lines containing a pattern</a></p>
<h3 id="vim">vim调试插件</h3>
<p>在使用dash.vim时遇到的一个问题, 想看看插件中某些变量的值是多少。搜到这篇文章：<a href="http://learnvimscriptthehardway.stevelosh.com/chapters/01.html">Echoing Messages</a></p>
<p>比如在插件里加上：</p>
<div class="hlcode"><pre><span class="n">echom</span> <span class="n">var_name</span>
</pre></div>


<p>然后在触发到这条后, 可以执行下面来查看输出</p>
<div class="hlcode"><pre><span class="o">:</span><span class="n">messages</span>
</pre></div>


<h3 id="_5">忽略大小写搜索</h3>
<p>首先有两个bool开关:</p>
<ul>
<li><code>ignorecase</code> 忽略大小写</li>
<li><code>smartcase</code> 智能选择匹配, 如果搜索pattern是全小写，则忽略大小写匹配；如果pattern包含大写，则会精准匹配</li>
</ul>
<p>另外，<code>\c</code>, <code>\C</code>可以覆盖<code>ignorecase</code>和<code>smartcase</code>的配置。</p>
<p><code>\c</code>表示搜索pattern忽略大小写，如下都会忽略大小写匹配<code>hello</code>：</p>
<div class="hlcode"><pre><span class="cp"># 最前的`/`表示vi中的开始搜索</span>
<span class="o">/</span><span class="err">\</span><span class="n">chello</span>
<span class="o">/</span><span class="err">\</span><span class="n">cHello</span>
<span class="o">/</span><span class="n">hello</span><span class="err">\</span><span class="n">c</span>
<span class="o">/</span><span class="n">HELLO</span><span class="err">\</span><span class="n">c</span>
</pre></div>


<p><code>\C</code>和<code>\c</code>相关，表示大小写敏感。</p>
<p>具体可以：</p>
<div class="hlcode"><pre><span class="o">:</span><span class="n">help</span> <span class="o">/</span><span class="err">\</span><span class="n">c</span>
<span class="o">:</span><span class="n">help</span> <span class="o">/</span><span class="err">\</span><span class="n">C</span>
<span class="o">:</span><span class="n">help</span> <span class="n">smartcase</span>
<span class="o">:</span><span class="n">help</span> <span class="n">ignorecase</span>
</pre></div>


<p>参考 <a href="http://stackoverflow.com/questions/2287440/how-to-do-case-insensitive-search-in-vim">How to do case insensitive search in Vim</a></p>
<h2 id="_6">参考</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/71323/how-to-replace-a-character-for-a-newline-in-vim">How to replace a character for a newline in Vim?</a></li>
<li><a href="http://stackoverflow.com/questions/71417/why-is-r-a-newline-for-vim">Why is \r a newline for Vim?</a></li>
<li><a href="http://stackoverflow.com/questions/594448/how-can-i-add-a-string-to-the-end-of-each-line-in-vim">How can I add a string to the end of each line in Vim?</a></li>
<li><a href="http://vimcdoc.sourceforge.net/doc/">VIM参考手册</a></li>
</ul>
<p>via <a href="https://wiki.tankywoo.com">TankyWoo</a></p>
<p>datagridview</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 heyunfan.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-06-13 22:18:32</p>
      </span>
    </div>

    
    
  </body>
</html>