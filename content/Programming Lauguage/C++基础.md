---
title: "C++"
date: 2018-06-25 14:19
updated: 2018-06-25 14:19
log: "第一次编辑"
---

[TOC]

## C++基础

包含一些c++的基本概念和规则，与C语言的一部分需要注意的点结合叙述。

### 变量和基本类型

在C++中，变量的初始化和赋值是两个完全不同的操作。

#### 列表初始化
用花括号来初始化变量得到了全面应用，如下：

```C++
int unit = {0};
int unit = 0;
int unit{0};
int unit(0);
```

#### 默认初始化

对于内置类型变量：若在函数外部，则被初始化为0；在函数内部，将不被初始化，即未被定义，将引发错误。

#### 变量声明和定义的关系

声明：让变量为程序所知。

定义：为变量创建与名字相关的实体。

```C++
extern int i; //声明
int j; //定义并定义
extern int i = 3; //定义
```

#### 复合类型：引用和指针

引用：给对象其另外一个名字，且必须被初始化。与别名等同。

```
int ival = 1024;
int &refVal = ival; //refVal引用ival
int &refVal4 = 10; //错误：引用只能绑定在对象上
```

指针：指向另外一个类型的复合类型。
空指针三种方式：`int *p1=nullptr;``int *p2=0;``int *p3=NULL;`

依照修饰符和变量名在一起的原则定义变量。`int *p = 1;`

#### 定义常量

多个文件共享const对象：`extern const int a = 1;`

对常量的引用一定要是相同类型的引用对象。

```
const int a = 1;
const int &1 = a;
```
不过，对const的引用可能引用一个并非const的对象，如下

```
int i  = 43;
int &a = i;
const int &r2 = i;
r1 = 0;
r2 = 0; //这个是错误的 无法改变
```
顶层const表示指针本身就是一个常量，底层const表示指针所指对象是一个常量。

#### 常量表达式和constexpr

常量表达式指值不会改变并且在编译过程中就能得到计算结果的表达式。

如果你认定一个变量是常量表达式，那么就把它声明为constexpr类型。

#### 自定义数据类型

```
struct sales_data { /* */ };
sales_data accum, trans, *salesptr;
```


